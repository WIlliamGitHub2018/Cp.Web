<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <!-- 可以让部分国产浏览器默认采用高速模式渲染页面： -->
    <meta name="renderer" content="webkit">

    <!-- Bootstrap 不支持 IE 古老的兼容模式。为了让 IE 浏览器运行最新的渲染模式下，建议将此 <meta> 标签加入到你的页面中： -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- 移动设备优先的 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- 禁用缩放
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> -->
    <link rel="stylesheet" href="layui/css/layui.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/theme.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries  IE8不支持媒体查询，需在服务器上运行respond.js 有效-->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="layui/layui.js"></script>
    <script src="js/custom.js"></script>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top top-nav-bar" role="navigation">

</nav>
<div class="body">
    <aside class="sidebar active">
    </aside>
    <div class="main-body">
        <!-- <iframe src="de.html" width="100%" height="100%"></iframe>  -->
        <div class="route">
            <h3 class="">权限列表</h3>
            <span>当前位置：<a href="">权限列表</a></span>
        </div>

        <div class="content-body permission-ms">
            <div class="list-info-section ">
                <h4 class="sec-title">
                    <b>权限管理列表</b>
                    <div class="operate-btns">
                        <a href="javascript:;" class="operate-btn insert-btn ">新建</a>
                        <a href="javascript:;" class="operate-btn edit-btn">编辑</a>
                        <a href="javascript:;" class="operate-btn delete-btn">删除</a>
                    </div>
                </h4>
                <div class="sec-item1">
                    <table class="table table-hover table-bordered ">
                        <thead>
                        <tr>
                            <th><input type="checkbox" name="" class="all-checkbox"></th>
                            <th class="table-sort-btn">编号
                                <a href="javascript:;" class="">
                                    <i class="fa fa-caret-down"></i>
                                </a>
                            </th>
                            <th>分组名称</th>
                            <th>分组描述</th>
                            <th>用户列表</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><input type="checkbox" name="" class="list-checkbox"></td>
                            <td>1</td>
                            <td>管理员</td>
                            <td>管理员</td>
                            <td>zhangsan，lisi</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" name="" class="list-checkbox"></td>
                            <td>2</td>
                            <td>超级管理员</td>
                            <td>超级管理员</td>
                            <td>chenzhong</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>
<!--新建编辑框-->
<div class="layer-common layer-add-all ">
      <div class="modal-body">
                <form action="" class="layui-form selector">
                    <div class="layui-form-item all-checks" pane="">
                        <div class="layui-inline">
                            <label class="layui-form-label"><em class="xing">*</em>分组名称</label>
                            <div class="layui-input-block">
                                <select name="" lay-filter="" lay-verify="required">
                                    <option value=""></option>
                                    <option value="0">管理员</option>
                                    <option value="1">超级管理员</option>
                                </select>
                            </div>
                        </div>

                        <div class="layui-inline">
                            <label class="layui-form-label"><em class="xing">*</em>排序</label>
                            <div class="layui-input-block">
                                <input type="number" name=""  placeholder="1" class="layui-input" lay-verify="required">
                            </div>
                        </div>
                        <div class="all-checked-row" id="permission">
                            <div class="layui-form-item all-permission" pane="">
                                <label class="layui-form-label">所有权限</label>
                                <div class="layui-input-block clear-input">
                                    <input type="checkbox" class="" name="" lay-skin="primary" title="全选"  lay-filter="list-permission-all">
                                </div>
                            </div>
                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">会员管理</label>
                                <div class="layui-input-block clear-input">
                                    <input type="checkbox" class="" name="" lay-skin="primary" title="全选"  lay-filter="list-select-all">
                                    <input type="checkbox" name="" lay-skin="primary" title="首页" checked=""  lay-filter="list-checkbox">
                                    <input type="checkbox" name="" lay-skin="primary" title="上传图片"  lay-filter="list-checkbox">
                                    <input type="checkbox" name="" lay-skin="primary" title="站点管理站点管理站点管理"  lay-filter="list-checkbox">
                                    <input type="checkbox" name="" lay-skin="primary" title="图片管理"  lay-filter="list-checkbox">
                                    <input type="checkbox" name="" lay-skin="primary" title="文件管理"  lay-filter="list-checkbox">
                                    <input type="checkbox" name="" lay-skin="primary" title="模板管理"  lay-filter="list-checkbox">
                                </div>
                            </div>
                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">用户</label>
                                <div class="layui-input-block clear-input">
                                    <input type="checkbox" class="" name="" lay-skin="primary" title="全选"  lay-filter="list-select-all">
                                    <input type="checkbox" name="" lay-skin="primary" title="zhangsan" checked=""  lay-filter="list-checkbox">
                                    <input type="checkbox" name="" lay-skin="primary" title="lisi"  lay-filter="list-checkbox">
                                    <input type="checkbox" name="" lay-skin="primary" title="chenzhong"  lay-filter="list-checkbox">

                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="layui-form-item">
                        <div class="layui-input-block btn-list ">
                            <a href="javascript:void(0);" class="layui-btn " type="submit">保存</a>
                        </div>
                    </div>
                </form>
            </div>

</div>
</body>

<script src="layui/layui_my.js"></script>
<script>
    $('.insert-btn').on('click',function () {
        addLayer('新建权限','.layer-add-all',750,400 );
    });
    $('.edit-btn').on('click',function () {
        editLayer('编辑权限', '.layer-add-all', 750, 400);
        var permission = $("#permission");
        console.log(permission.html());
    });
    layui.use('form', function() {
        var form = layui.form
//        form.on('checkbox(list-select-all)', function(data){
//            var child = $(data.elem).siblings('input[type="checkbox"]');
//            child.each(function(index, item){
//                item.checked = data.elem.checked;
//            });
//            form.render('checkbox');
//        });
        form.on('checkbox(list-permission-all)', function (data) {
            var p = $(data.elem).parents(".all-permission").siblings('.layui-form-item');
            console.log(p);
            for(var i=0;i<p.length;i++){
                var all =$(p[i]).find('input[type="checkbox"]');
                all.each(function (index, item) {
                    item.checked = data.elem.checked;
                });
            }
            form.render('checkbox');
        });
//        form.on('checkbox(list-checkbox)',function(data){
//            alert(11);
//            var allCheck = $(data.elem).parents(".layui-form-item").siblings(".all-permission").find(' input[lay-filter="list-permission-all"]');
//            console.log(allCheck);
//            if(data.elem.checked != true){
//                allCheck.prop("checked",false);
//            }
//            form.render('checkbox');
//        });
    });
</script>
</html>